define("block_pdfaccessibility/pdf_analyzer",[],(function(){return{init:function(){const sesskey=M.cfg.sesskey,filemanagerList=document.querySelector(".filemanager .fp-content");if(!filemanagerList)return void alert("filemanager nÃ£o encontrado!");new MutationObserver((()=>{const draftid=null===(_document$getElementB=document.getElementById("id_files"))||void 0===_document$getElementB?void 0:_document$getElementB.value;var _document$getElementB;const div=document.getElementById("analyzer-result");div&&(div.innerHTML='<span style="color:#555;">Analyzing PDF accessibility, please wait...</span>'),draftid&&(draftid=>{fetch("/blocks/pdfaccessibility/ajax/preview.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({draftid:draftid,sesskey:sesskey})}).then((res=>res.json())).then((data=>{const div=document.getElementById("analyzer-result");if(!div)return;if("ok"!==data.status||!data.summary)return void(div.innerHTML='<span style="color:red">'.concat(data.message||"Erro ao analisar PDF.","</span>"));let filename="PDF";data.filename?filename=data.filename:data.pdfs&&data.pdfs[0]&&data.pdfs[0].filename&&(filename=data.pdfs[0].filename);const summary=data.summary,checks=[{label:"Document Title Check",value:"No Title Found"!==summary.Title?"Pass":"Fail",pass:"No Title Found"!==summary.Title,link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF18",linkText:"How to fix?"},{label:"Language Consistency Check",value:summary["Languages match"]?"Pass":"Fail",pass:summary["Languages match"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF16",linkText:"How to fix?"},{label:"OCR Application Check",value:"PDF with text"===summary["PDF only image"]?"Pass":"Fail",pass:"PDF with text"===summary["PDF only image"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF7",linkText:"How to fix?"},{label:"Link Validity Check",value:summary["Links Valid"]?"Pass":"Fail",pass:summary["Links Valid"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF11",linkText:"How to fix?"},{label:"Image Alt Text Check",value:summary["Figures with alt text"]?"Pass":"Fail",pass:summary["Figures with alt text"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF1",linkText:"How to fix?"},{label:"List Tagging Check",value:summary["Lists marked as Lists"]?"Pass":"Fail",pass:summary["Lists marked as Lists"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF21",linkText:"How to fix?"},{label:"Table Header Check",value:summary["Table With Headers"]?"Pass":"Fail",pass:summary["Table With Headers"],link:"https://www.w3.org/TR/WCAG20-TECHS/pdf#PDF6",linkText:"How to fix?"}],passed=checks.filter((c=>c.pass)).length,failed=checks.length-passed;checks.sort(((a,b)=>a.pass===b.pass?0:a.pass?-1:1));let html='\n        <div style="font-family:Arial,sans-serif;max-width:320px;">\n            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; background-color: white; \n            border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); color: black; margin-bottom: 10px;">\n                <i class="fa fa-info-circle" aria-hidden="true"></i>\n                <bold style="font-size: 0.95rem; font-weight: bold; margin-bottom: 2px;">'.concat(filename,'</bold><br>\n                <div style="margin-top:10px">\n                    <span style="color:#27ae60;font-weight:bold;">').concat(passed,'</span>\n                    <span style="color:black;">passed</span>\n                    <span style="color:#e74c3c;font-weight:bold;margin-left:10px;">').concat(failed,'</span>\n                    <span style="color:black;">failed</span>\n                    \n                </div>\n            </div>\n            <div>\n            <div style="background: #f8f9fa;\n                        border-radius: 8px;\n                        padding: 10px;\n                        background-color: white;\n                        border-radius: 8px;\n                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n                        color: black;\n                        margin-bottom: 10px;">\n                             \n                    <bold style="   font-size: 0.90rem;\n                                    font-weight: bold;\n                                    margin-bottom: 2px;">Detailed Report</bold><br>\n                    ').concat(checks.map(((c,i)=>'\n    <div style="display:flex;align-items:flex-start;margin-top:8px;margin-bottom:10px;\n        background:'.concat(c.pass?"#eafaf1":"#fff4f4",';\n        border-radius:6px;padding:6px 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">\n        <span style="font-size:1.2em;margin-right:8px;margin-top:2px;color:').concat(c.pass?"#27ae60":"#e74c3c",';">\n            ').concat(c.pass?'<i style="color:green;" class="fa fa-check" aria-hidden="true"></i>':'<i style="color:red;" class="fa fa-times" aria-hidden="true"></i>','\n        </span>\n        <div style="flex:1;">\n            <div style="display:flex;align-items:center;justify-content:space-between;">\n                <div style="font-weight:bold; font-size: 0.925rem; color: #1e1e1e;">').concat(c.label,"</div>\n                ").concat(c.pass?"":'\n                    <button type="button"\n                        aria-expanded="false"\n                        aria-controls="fail-detail-'.concat(i,'"\n                        style="background:none;border:none;cursor:pointer;padding:0 6px;"\n                        onclick="\n                            var d=document.getElementById(\'fail-detail-').concat(i,"');\n                            var a=this.querySelector('.arrow');\n                            var expanded=this.getAttribute('aria-expanded')==='true';\n                            d.style.display=expanded?'none':'block';\n                            this.setAttribute('aria-expanded',!expanded);\n                            a.style.transform=expanded?'rotate(0deg)':'rotate(90deg)';\n                        \">\n                        <span class=\"arrow\" style=\"display:inline-block;transition:transform 0.2s;\n                        vertical-align:middle;\">&#9662;</span>\n                    </button>\n                "),'\n            </div>\n            <div style="font-size: 0.9rem; color: #282828; margin-left: 1%; margin-top: 1px;">').concat(c.value,"</div>\n            ").concat(c.pass?"":'\n            <div id="fail-detail-'.concat(i,'" style="display:none;margin-top:5px;font-size:0.85em;color:#a94442;">\n                <a href="').concat(c.link,'" target="_blank" rel="noopener">').concat(c.linkText||c.link,"</a>\n            </div>\n        "),"\n        </div>\n    </div>\n"))).join(""),"\n                        </div>\n                       \n                    </div>\n                    </div>\n                    ");div.innerHTML=html}))})(draftid)})).observe(filemanagerList,{childList:!0,subtree:!0})}}}));

//# sourceMappingURL=pdf_analyzer.min.js.map